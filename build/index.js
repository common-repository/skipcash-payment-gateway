(()=>{"use strict";const e=window.React,t=window.wp.element,n=window.wp.htmlEntities,{registerPaymentMethod:a}=window.wc.wcBlocksRegistry,{getSetting:r}=window.wc.wcSettings,i=r("skipcash_data",{}),s=skipcashNonce.nonce,o=(0,n.decodeEntities)(i.title||""),c=({eventRegistration:e})=>{const{onCheckoutSuccess:a}=e,i=r("skipcash_data",{});return(0,t.useEffect)((()=>{const e=a((e=>(console.log("Checkout success event fired. Initiating payment..."),l(e.orderId).then((e=>({type:"success",redirectUrl:e}))).catch((e=>(console.error(e.message),{type:"error",message:e.message,retry:!0}))))));return()=>{e()}}),[a]),(0,n.decodeEntities)(i.description||"")};function l(e){return new Promise(((t,n)=>{jQuery.ajax({url:"/wp-admin/admin-ajax.php",method:"POST",data:{action:"handle_payment_submission",settings:i,nonce:s,order_id:e},success:function(e){e.success&&e.data.payUrl?(console.log("Payment initiated successfully. Redirecting to payment page..."),t(e.data.payUrl)):(console.error("Failed to initiate payment:",e.data),n(new Error("Failed to initiate payment.")))},error:function(e){console.error("Error initiating payment:",e),n(new Error("Error initiating payment."))}})}))}a({name:"skipcash",label:(0,e.createElement)((t=>{const{PaymentMethodLabel:n}=t.components;return(0,e.createElement)(n,{text:o})}),null),content:(0,e.createElement)(c,null),edit:(0,e.createElement)(c,null),canMakePayment:()=>!0,ariaLabel:o,supports:{features:i.supports}})})();